<div data-controller="update-fave-button">
  <div id="heart" data-update-fave-button-target="items">
    <% favourite = resource.favourited_by_user?(current_user) %>
    <% if favourite %>
      <%= link_to icon('fas', 'heart'), favourite_path(I18n.locale, favourite), method: :delete, remote:true, data: {update_fave_button_target: "button", action: 'click->update-fave-button#unfave'}  %>

    <%# <% raise %>
        <% else %>
      <%= link_to icon('far', 'heart'), resource_favourites_path(I18n.locale, resource), method: :post, remote:true, data: {update_fave_button_target: "button", action: 'click->update-fave-button#fave'} %>
    <% end %>
  </div>


  <div  data-update-fave-button-target="resources">
  <h3><%= resource.name %></h3>
  <h6><%= resource.categories.pluck(:name).join(',') %></h6>
  <p><%= t("Address")  %>: <br><%= resource.address %></p>
  <p><%= t("Contact")  %>: <br><%= resource.phone %></p>
  <p><%= t("Description") %>: <br><%= resource.description %></p>
  <p><%= t("Email")  %>: <%= mail_to resource.email %></p>
  <br>
  <%= link_to "#newTag", data: { toggle: "modal" } do %>
    <i class="fa fa-wrench"></i> <%= t("Is this information wrong?") %>
  <% end %>

  <br>
  <br>
  <a href="<%= resource.website %>" target="_blank"><%= t("Website")  %></a> |
  <a href="<%= resource.phone %>"><%= t("Phone")  %></a> |
  <a href="<%= "https://www.google.com/maps/dir//" + resource.address.gsub(" ", "+") %>" target="_blank"><%= t("Directions")  %></a>

</div>
</div>

<!-- Modal -->
<div id="newTag" class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="wrong-info-modal">Please tell us what is wrong</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body p-4">
        <%= simple_form_for([resource, @message]) do |f| %>
            <%= f.input :content %>
            <%= f.input :resource, as: :hidden, value: resource %>
            <%= f.submit %>
        <% end %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </div>
</div>

